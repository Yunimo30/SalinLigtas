<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SalinLigtas</title>
  <link rel="icon" type="image/png" href="favicon/favicon.ico" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="styles/validation.css" />
  <link rel="stylesheet" href="styles/weatherForecast.css" />
  <link rel="stylesheet" href="styles/emergency3.css" />
  <link rel="stylesheet" href="styles/help-units.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <header class="header">
    <button class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <nav class="nav" id="nav">
      <img src="logo/logo.png" alt="SalinLigtas Logo" class="nav-logo">
      <a href="#" class="nav-link active" data-section="home">Home</a>
      <a href="#" class="nav-link" data-section="plan-monitor">Plan & Monitor</a>
      <a href="#" class="nav-link" data-section="weather-bulletin">Weather Bulletin</a>
      <a href="#" class="nav-link" data-section="emergency-hub">Emergency Hub</a>
      <a href="#" class="nav-link" data-section="report-issues">Report Issues</a>
    </nav>
    <div class="header-controls">
      <div class="theme-toggle-container">
        <button id="themeToggleBtn" class="theme-toggle-btn" title="Toggle Theme">
          <i class="fas fa-moon"></i>
        </button>
        <div id="themeMenu" class="theme-menu">
          <button class="theme-option" data-theme="light">
            <i class="fas fa-sun"></i> Light Mode
          </button>
          <button class="theme-option" data-theme="dark">
            <i class="fas fa-moon"></i> Dark Mode
          </button>
          <button class="theme-option" data-theme="system">
            <i class="fas fa-desktop"></i> System
          </button>
        </div>
      </div>
      <a href="https://github.com/Yunimo30/SalinLigtas" target="_blank" class="github-link" title="View on GitHub">
        <i class="fab fa-github"></i>
      </a>
    </div>
  </header>

  <section id="home" class="page-section active">
    <div class="hero-section">
      <img src="logo/logo.png" alt="SalinLigtas Logo" class="hero-logo">
      <h1>Welcome to Salinligtas</h1>
      <p>A comprehensive flood monitoring and response system for campuses. Stay informed, plan ahead, and respond effectively to flood risks.</p>
    </div>

    <div class="stats-section">
      <div class="stat-card">
        <i class="fas fa-university"></i>
        <div class="stat-number">5</div>
        <div class="stat-label">Monitored Campuses</div>
      </div>
      <div class="stat-card">
        <i class="fas fa-chart-line"></i>
        <div class="stat-number">1000+</div>
        <div class="stat-label">Simulations Run</div>
      </div>
      <div class="stat-card">
        <i class="fas fa-shield-alt"></i>
        <div class="stat-number">24/7</div>
        <div class="stat-label">Monitoring</div>
      </div>
    </div>

    <div class="features-section">
      <h2>Key Features</h2>
      <div class="features-grid">
        <div class="feature-card">
          <i class="fas fa-map-marked-alt"></i>
          <h3>Predictive Maps</h3>
          <p>Visualize flood risks and safe routes around your campus with real-time data.</p>
        </div>
        <div class="feature-card">
          <i class="fas fa-bell"></i>
          <h3>Real-time Alerts</h3>
          <p>Get instant notifications about changing weather conditions and flood risks.</p>
        </div>
        <div class="feature-card">
          <i class="fas fa-route"></i>
          <h3>Safe Route Planning</h3>
          <p>Identify the safest evacuation routes and make informed decisions quickly.</p>
        </div>
      </div>
    </div>

    <div class="about-section">
      <h2>About SalinLigtas</h2>
      <p>SalinLigtas is a predictive simulation map designed for schools in flood-prone areas. Using user input data (historical and current rainfall data), the system visualizes high-risk areas around the campus and indicates safe route streets. It aims to help in anticipating flooding, plan evacuations, and make earlier, reliable, and independent suspension decisions to protect students and staff.</p>
    </div>

    <div class="tutorial-section">
      <h2>How to Use Salinligtas</h2>
      <div class="tutorial-steps">
        <div class="tutorial-step">
          <div class="step-number floating">1</div>
          <h3>Select Your Campus</h3>
          <p>Choose your campus from the dropdown in the Plan & Monitor section.</p>
        </div>
        <div class="tutorial-step">
          <div class="step-number floating">2</div>
          <h3>Input Rainfall Data</h3>
          <p>Enter rainfall intensity, duration, and pattern or use preset scenarios.</p>
        </div>
        <div class="tutorial-step">
          <div class="step-number floating">3</div>
          <h3>Run Simulation</h3>
          <p>Click "Run Simulation" to see flood predictions and safe routes.</p>
        </div>
        <div class="tutorial-step">
          <div class="step-number floating">4</div>
          <h3>Take Action</h3>
          <p>Use the results to plan evacuations and make suspension decisions.</p>
        </div>
      </div>
    </div>

    <div class="cta-section">
      <p>Ready to protect your campus? Head to the Plan & Monitor section to start your first simulation.</p>
      <button class="cta-button" onclick="navigateToSection('plan-monitor')">Start Planning</button>
    </div>
  </section>

  <section id="plan-monitor" class="page-section">
    <!-- Mobile Toggles -->
    <div class="mobile-toggles">
      <button id="mobileControlsToggle" class="mobile-toggle-btn">Controls</button>
      <button id="mobileResultsToggle" class="mobile-toggle-btn">Results</button>
    </div>

    <!-- LEFT: Controls -->
    <aside class="controls card" id="controlsPanel">
      <div class="control-header">
        <h2><i class="fas fa-cogs"></i> Simulation Controls</h2>
        <p class="control-subtitle">Configure your flood simulation parameters</p>
      </div>

      <div class="tabs">
        <button class="tab-btn active" data-tab="simulation">Simulation</button>
        <button class="tab-btn" data-tab="forecast">Forecast</button>
      </div>

      <div id="simulationTab" class="tab-content">
          <div class="control-group">
            <label for="campusSelect"><i class="fas fa-map-marker-alt"></i> Select Campus</label>
            <select id="campusSelect"></select>
            <button id="validateCoordinatesBtn" class="run-btn secondary" style="margin-top: 10px;">
              <i class="fas fa-check-circle"></i> Validate Coordinates
            </button>
          </div>

          <div class="control-group">
            <label for="intensity"><i class="fas fa-cloud-rain"></i> Rainfall Intensity (mm/hr) <span id="intensityHelp" class="help-icon" title="Click for guidelines">?</span></label>
          <input id="intensity" type="number" value="30" min="0" max="200" />
        </div>

        <div class="control-group">
          <label for="duration"><i class="fas fa-clock"></i> Duration (minutes) <span id="durationHelp" class="help-icon" title="Click for guidelines">?</span></label>
          <input id="duration" type="number" value="60" min="0" max="1440" />
        </div>

        <div class="control-group">
          <label for="weatherMode"><i class="fas fa-cloud-sun"></i> Weather Mode <span id="weatherModeHelp" class="help-icon" title="Click for guidelines">?</span></label>
          <select id="weatherMode">
            <option value="manual">Manual Input</option>
            <option value="mock">Mock Data</option>
            <option value="real-time">Real-Time</option>
          </select>
        </div>

        <div class="control-group">
          <label for="rainfallPattern"><i class="fas fa-chart-line"></i> Rainfall Pattern <span id="rainfallPatternHelp" class="help-icon" title="Click for guidelines">?</span></label>
          <select id="rainfallPattern">
            <option value="bell">Bell Curve</option>
            <option value="uniform">Uniform</option>
            <option value="increasing">Increasing</option>
            <option value="decreasing">Decreasing</option>
          </select>
        </div>

        <div class="control-group">
          <button id="viewStreetDetailsBtn" class="run-btn" style="width: 100%; margin-top: 10px;"><i class="fas fa-info-circle"></i> View Street Details</button>
        </div>

        <div class="control-group">
          <label><i class="fas fa-magic"></i> Quick Scenarios</label>
          <div class="scenario-row">
            <button class="scenario-btn" data-i="10" data-d="30">Light</button>
            <button class="scenario-btn" data-i="30" data-d="60">Moderate</button>
            <button class="scenario-btn" data-i="60" data-d="120">Heavy</button>
          </div>
        </div>

        <div class="control-actions">
          <button id="runSim" class="run-btn primary"><i class="fas fa-play"></i> Run Simulation</button>
          <button id="help-units-toggle" class="help-toggle-btn secondary">
            <i class="fas fa-question-circle"></i> Help & Units
          </button>
        </div>

      </div>

      <div id="forecastTab" class="tab-content" style="display:none;">
        <h2>24-Hour Forecast</h2>

        <div class="scenario-row">
          <button class="forecast-scenario" data-type="clear">Clear Weather</button>
          <button class="forecast-scenario" data-type="moderate">Moderate Rain</button>
          <button class="forecast-scenario" data-type="severe">Severe Storm</button>
        </div>

        <label for="forecastHour">Forecast Hour (0-23)</label>
        <input id="forecastHour" type="range" min="0" max="23" value="0" />

        <div id="forecastResults"></div>
      </div>
    </aside>

    <!-- CENTER: Map (bounded frame) -->
    <main class="map-panel card">
      <div id="suspensionBanner" class="suspension-banner">
        <div class="banner-tile" id="tileFloodLevel">
          <div class="tile-label">Flood Level</div>
          <div class="tile-value">Ankle Level</div>
        </div>
        <div class="banner-tile" id="tileIntensity">
          <div class="tile-label">Intensity</div>
          <div class="tile-value">0 mm/hr</div>
        </div>
        <div class="banner-tile" id="tileOnset">
          <div class="tile-label">Onset</div>
          <div class="tile-value">N/A</div>
        </div>
        <div class="banner-tile" id="tileRoutes">
          <div class="tile-label">Passable Routes</div>
          <div class="tile-value">0/0</div>
        </div>
        <div class="banner-tile" id="tileStatus">
          <div class="tile-label">Campus Status</div>
          <div class="tile-value">Normal</div>
        </div>
      </div>
      <div id="map" aria-label="Campus map"></div>
    </main>

    <!-- RIGHT: Results -->
    <aside class="results card">
      <div class="results-header">
        <h3><i class="fas fa-chart-bar"></i> Simulation Results</h3>
        <p class="results-subtitle">Analysis and insights from your simulation</p>
      </div>

      <div class="results-content">
        <div class="results-section">
          <h4><i class="fas fa-road"></i> Flood Risk by Street</h4>
          <div class="table-container">
            <table id="floodTable" class="flood-table">
              <thead>
                <tr><th>Street</th><th>Risk</th><th>Expected height (cm)</th><th>Forecast Peak (cm)</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

      <div class="results-section">
        <h4><i class="fas fa-chart-area"></i> Rainfall Profile</h4>
        <canvas id="rainfallChart"></canvas>
      </div>

      <div class="results-section">
        <h4><i class="fas fa-pie-chart"></i> Hazard Breakdown</h4>
        <canvas id="hazardChart"></canvas>
      </div>

      <div class="results-section">
        <h4><i class="fas fa-history"></i> Historical Trends</h4>
        <canvas id="historicalChart"></canvas>
      </div>

      <div class="results-section">
        <h4><i class="fas fa-tachometer-alt"></i> Key Metrics</h4>
        <div class="kpis">
          <div class="kpi-item">
            <span class="kpi-label">Flood Onset</span>
            <span class="kpi-value" id="kpiOnset">--</span>
            <span class="kpi-unit">min</span>
          </div>
          <div class="kpi-item">
            <span class="kpi-label">Passable Routes</span>
            <span class="kpi-value" id="kpiRoutes">--</span>
          </div>
          <div class="kpi-item">
            <span class="kpi-label">Model Accuracy</span>
            <span class="kpi-value" id="kpiAccuracy">85%</span>
          </div>
          <div class="kpi-item">
            <span class="kpi-label">Suspension Risk</span>
            <span class="kpi-value" id="kpiSuspension">--</span>
          </div>
          <div class="kpi-item">
            <span class="kpi-label">Height Comparison</span>
            <span class="kpi-value" id="kpiHeightComparison">--</span>
          </div>
        </div>
      </div>

      </div> <!-- End of results-content -->

      <div class="results-footer">
        <div class="results-actions">
          <button id="hotlinesBtn" class="run-btn secondary"><i class="fas fa-phone"></i> Emergency Hotlines</button>
          <button id="exportBtn" class="run-btn secondary"><i class="fas fa-download"></i> Export Results</button>
        </div>

        <div id="alerts" class="alert-section" style="display:none;">
          <i class="fas fa-exclamation-triangle"></i>
          <span>Alert message will appear here</span>
        </div>

        <div id="routeSummary" class="route-summary" style="display:none;"></div>
      </div>
    </aside>
  </section>

  <section id="weather-bulletin" class="page-section">
    <div class="weather-container">
      <div class="weather-header">
        <h1><i class="fas fa-cloud-sun"></i> Weather Bulletin</h1>
        <p class="weather-subtitle">Real-time weather monitoring and forecasts for flood-prone areas</p>
        <div class="weather-location-selector">
          <div class="location-input-group">
            <label for="locationSelect"><i class="fas fa-map-marker-alt"></i> Select Location:</label>
            <select id="locationSelect">
              <option value="Manila,PH">Manila, Philippines</option>
              <option value="Quezon City,PH">Quezon City, Philippines</option>
              <option value="Makati,PH">Makati, Philippines</option>
              <option value="Pasig,PH">Pasig, Philippines</option>
              <option value="Taguig,PH">Taguig, Philippines</option>
              <option value="Cebu City,PH">Cebu City, Philippines</option>
              <option value="Davao City,PH">Davao City, Philippines</option>
              <option value="Iloilo City,PH">Iloilo City, Philippines</option>
              <option value="Baguio,PH">Baguio, Philippines</option>
              <option value="Batangas,PH">Batangas, Philippines</option>
            </select>
          </div>
          <div class="weather-location">
            <i class="fas fa-map-marker-alt"></i>
            <span id="weatherLocation">Manila, Philippines</span>
          </div>
        </div>
      </div>

            <!-- Weather Grid -->
      <div class="weather-grid">
        <!-- Current Weather -->
        <div class="weather-card current-weather">
          <h3><i class="fas fa-sun"></i> Current Conditions</h3>
          <div class="current-details">
            <div class="temp-display">
              <span id="currentTemp">28</span>
              <span class="temp-unit">°C</span>
            </div>
            <div class="weather-condition">
              <i id="currentIcon" class="fas fa-cloud"></i>
              <span id="currentCondition">Partly Cloudy</span>
            </div>
            <div class="weather-metrics">
              <div class="metric">
                <i class="fas fa-tint"></i>
                <span id="currentHumidity">75%</span>
              </div>
              <div class="metric">
                <i class="fas fa-wind"></i>
                <span id="currentWind">15 km/h</span>
              </div>
              <div class="metric">
                <i class="fas fa-eye"></i>
                <span id="currentVisibility">10 km</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Enhanced Weather Alerts -->
        <div class="weather-card alerts-card">
          <h3>
            <i class="fas fa-exclamation-triangle"></i> Weather Alerts
            <span class="alert-controls">
              <button class="alert-filter-btn" data-filter="all">All</button>
              <button class="alert-filter-btn" data-filter="active">Active</button>
              <button class="alert-filter-btn" data-filter="expired">Expired</button>
            </span>
          </h3>
          <div id="weatherAlerts" class="alerts-container">
            <!-- Alerts will be dynamically populated -->
          </div>
        </div>

        <!-- Weather Graphs -->
        <!-- Weather Trends -->
        <div class="weather-card graphs-card">
          <h3><i class="fas fa-chart-line"></i> Weather Trends</h3>
          <div class="data-source-disclaimer">
            <i class="fas fa-info-circle"></i>
            <span>Data Source: OpenWeatherMap API. When API is unavailable, sample data is shown for demonstration.</span>
          </div>
          <div class="weather-graphs-container">
            <div class="metric-selector">
              <select id="weatherMetricSelect" class="metric-select">
                <option value="precipitation">Precipitation</option>
                <option value="temperature">Temperature</option>
                <option value="wind">Wind Speed</option>
                <option value="humidity">Humidity</option>
              </select>
            </div>
            <div class="graph-content">
              <canvas id="weatherTrendsChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Radar and Satellite View -->
        <div class="weather-card radar-card">
          <h3><i class="fas fa-satellite"></i> Radar & Satellite</h3>
          <div class="data-source-disclaimer">
            <i class="fas fa-info-circle"></i>
            <span>Data Source: PAGASA Doppler Radar Network. Currently showing simulated view for demonstration.</span>
          </div>
          <div class="view-controls">
            <button class="view-btn active" data-view="radar">Radar</button>
            <button class="view-btn" data-view="satellite">Satellite</button>
            <button class="view-btn" data-view="composite">Composite</button>
          </div>
          <div id="radarContainer" class="radar-container">
            <!-- Radar/Satellite view will be loaded here -->
          </div>
          <div class="radar-timeline">
            <input type="range" id="radarTimeline" min="0" max="12" value="12">
            <div class="timeline-labels">
              <span>-6h</span>
              <span>Now</span>
            </div>
          </div>
        </div>

        <!-- Location Comparison -->
        <div class="weather-card comparison-card">
          <h3>
            <i class="fas fa-map-marker-alt"></i> Location Comparison
            <button class="add-location-btn" id="addLocationBtn">
              <i class="fas fa-plus"></i> Add Location
            </button>
          </h3>
          <div class="data-source-disclaimer">
            <i class="fas fa-info-circle"></i>
            <span>Data Source: Real-time OpenWeatherMap API data for selected Philippine cities. Fallback to sample data if API is unavailable.</span>
          </div>
          <div id="weatherComparison" class="comparison-container">
            <!-- Location comparisons will be dynamically added -->
          </div>
        </div>

        <!-- Historical Analysis -->
        <div class="weather-card analysis-card">
          <h3><i class="fas fa-history"></i> Historical Analysis</h3>
          <div class="data-source-disclaimer">
            <i class="fas fa-info-circle"></i>
            <span>Historical data based on PAGASA records and OpenWeatherMap historical API. Currently showing sample data for demonstration purposes. Real historical analysis will be available once connected to weather data providers.</span>
          </div>
          <div class="analysis-controls">
            <select id="analysisTimeframe">
              <option value="7">Past Week</option>
              <option value="30">Past Month</option>
              <option value="90">Past 3 Months</option>
              <option value="365">Past Year</option>
            </select>
          </div>
          <div id="historicalAnalysis" class="analysis-container">
            <!-- Historical analysis will be displayed here -->
          </div>
        </div>

        <!-- 24-Hour Forecast -->
        <div class="weather-card forecast-card">
          <h3><i class="fas fa-clock"></i> 24-Hour Forecast</h3>
          <div id="hourlyForecast" class="forecast-container">
          </div>
        </div>

        <!-- 7-Day Forecast -->
        <div class="weather-card forecast-card">
          <h3><i class="fas fa-calendar-week"></i> 7-Day Forecast</h3>
          <div id="weeklyForecast" class="forecast-container">
          </div>
        </div>

        <!-- Weather Impact Analysis -->
        <div class="weather-card impact-card">
          <h3><i class="fas fa-chart-pie"></i> Weather Impact Analysis</h3>
          <div class="impact-metrics">
            <div class="impact-item">
              <span class="impact-label">Flood Risk Level</span>
              <span id="floodRiskLevel" class="impact-value high">High</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">Precipitation Rate</span>
              <span id="precipitationRate" class="impact-value">25 mm/hr</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">Storm Surge Potential</span>
              <span id="stormSurge" class="impact-value medium">Medium</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">Visibility Conditions</span>
              <span id="visibilityStatus" class="impact-value">Good</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">Wind Advisory</span>
              <span id="windAdvisory" class="impact-value">Normal</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">Air Quality Index</span>
              <span id="airQualityIndex" class="impact-value">85 - Moderate</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">UV Index</span>
              <span id="uvIndex" class="impact-value">7 - High</span>
            </div>
            <div class="impact-item">
              <span class="impact-label">Heat Index</span>
              <span id="heatIndex" class="impact-value">32°C</span>
            </div>
          </div>
        </div>

        <!-- Air Quality & Environmental -->
        <div class="weather-card air-quality-card">
          <h3><i class="fas fa-wind"></i> Air Quality & Environment</h3>
          <div class="data-source-disclaimer">
            <i class="fas fa-info-circle"></i>
            <span>Data Source: IQAir API and OpenWeatherMap. Currently showing sample data for demonstration.</span>
          </div>
          <div class="air-quality-metrics">
            <div class="air-quality-main">
              <div class="aqi-display">
                <span class="aqi-number" id="aqiNumber">85</span>
                <span class="aqi-status" id="aqiStatus">Moderate</span>
              </div>
              <div class="aqi-bar">
                <div class="aqi-fill" id="aqiFill" style="width: 85%"></div>
              </div>
            </div>
            <div class="air-quality-details">
              <div class="pollutant-item">
                <span class="pollutant-name">PM2.5</span>
                <span class="pollutant-value" id="pm25Value">25.3 µg/m³</span>
              </div>
              <div class="pollutant-item">
                <span class="pollutant-name">PM10</span>
                <span class="pollutant-value" id="pm10Value">45.2 µg/m³</span>
              </div>
              <div class="pollutant-item">
                <span class="pollutant-name">NO₂</span>
                <span class="pollutant-value" id="no2Value">12.1 µg/m³</span>
              </div>
              <div class="pollutant-item">
                <span class="pollutant-name">O₃</span>
                <span class="pollutant-value" id="o3Value">35.4 µg/m³</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Weather Map -->
        <div class="weather-card weather-map-card">
          <h3><i class="fas fa-map"></i> Weather Map</h3>
          <div class="data-source-disclaimer">
            <i class="fas fa-info-circle"></i>
            <span>Data Source: OpenWeatherMap Weather Maps API. Currently showing simulated map for demonstration.</span>
          </div>
          <div class="map-controls">
            <button class="map-layer-btn active" data-layer="precipitation">Precipitation</button>
            <button class="map-layer-btn" data-layer="temperature">Temperature</button>
            <button class="map-layer-btn" data-layer="wind">Wind</button>
            <button class="map-layer-btn" data-layer="pressure">Pressure</button>
          </div>
          <div id="weatherMapContainer" class="weather-map-container">
            <!-- Weather map will be loaded here -->
          </div>
        </div>

        <!-- Weather Advisories -->
        <div class="weather-card advisories-card">
          <h3><i class="fas fa-exclamation-triangle"></i> Weather Advisories</h3>
          <div class="advisories-content">
            <div class="advisory-item active">
              <div class="advisory-header">
                <i class="fas fa-umbrella"></i>
                <span class="advisory-title">Heavy Rainfall Warning</span>
                <span class="advisory-time">Until 6:00 PM</span>
              </div>
              <p class="advisory-description">Heavy rainfall expected in Metro Manila. Possible flooding in low-lying areas. Stay indoors and monitor local news.</p>
            </div>
            <div class="advisory-item">
              <div class="advisory-header">
                <i class="fas fa-wind"></i>
                <span class="advisory-title">Strong Wind Advisory</span>
                <span class="advisory-time">Until 8:00 PM</span>
              </div>
              <p class="advisory-description">Winds of 30-40 km/h expected. Secure loose objects and be cautious when driving.</p>
            </div>
            <div class="advisory-item">
              <div class="advisory-header">
                <i class="fas fa-sun"></i>
                <span class="advisory-title">High UV Index</span>
                <span class="advisory-time">Until 5:00 PM</span>
              </div>
              <p class="advisory-description">UV index is high. Wear protective clothing, sunscreen, and limit sun exposure between 10 AM and 4 PM.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="weather-actions">
        <button class="run-btn secondary" onclick="refreshWeather()">
          <i class="fas fa-sync-alt"></i> Refresh Data
        </button>
        <button class="run-btn secondary" onclick="exportWeatherData()">
          <i class="fas fa-download"></i> Export Report
        </button>
      </div>
    </div>
  </section>

  <!-- Coordinate Validation Section -->
  <section id="coordinate-validation" class="page-section">
    <div class="validation-container">
      <div class="validation-header">
        <h2><i class="fas fa-map-marker-alt"></i> Coordinate Validation</h2>
        <p>Validate and verify coordinates for all campus locations</p>
      </div>

      <div class="validation-controls">
        <button id="validateCoordinates" class="run-btn primary">
          <i class="fas fa-check-circle"></i> Validate All Coordinates
        </button>
        <button onclick="validationController.exportValidationReport()" class="run-btn secondary">
          <i class="fas fa-download"></i> Export Report
        </button>
      </div>

      <div class="validation-progress">
        <div id="validationProgress" class="progress-bar"></div>
      </div>

      <div id="validationResults" class="validation-results">
        <!-- Results will be populated here -->
      </div>
    </div>
  </section>

  <section id="emergency-hub" class="page-section">
    <div class="emergency-container">
      <div class="emergency-header">
        <h1><i class="fas fa-first-aid"></i> Emergency Hub</h1>
        <p class="emergency-subtitle">Quick access to emergency resources, alerts, and evacuation procedures</p>
      </div>

      <div class="emergency-grid">
        <!-- Left Column -->
        <div class="emergency-column left-column">
          <!-- Emergency Alerts -->
          <div class="card alerts-card">
            <h3><i class="fas fa-exclamation-circle"></i> Emergency Alerts</h3>
            <div class="alert-filters">
              <button class="alert-filter active" data-filter="all">All</button>
              <button class="alert-filter" data-filter="high">High Priority</button>
              <button class="alert-filter" data-filter="warning">Warnings</button>
              <button class="alert-filter" data-filter="info">Information</button>
            </div>
            <div id="emergencyAlerts" class="alerts-container">
              <!-- Alerts will be populated here -->
            </div>
          </div>

          <!-- Emergency Resources -->
          <div class="card resources-card">
            <h3><i class="fas fa-hand-holding-medical"></i> Emergency Resources</h3>
            <div class="resources-grid">
              <!-- First Aid Guide -->
              <div class="resource-section">
                <h4><i class="fas fa-medical-kit"></i> First Aid Guide</h4>
                <div class="first-aid-tips">
                  <div class="tip-item">
                    <h5>Basic First Aid</h5>
                    <ul>
                      <li>Check the scene for safety</li>
                      <li>Call for emergency assistance</li>
                      <li>Care for the person until help arrives</li>
                    </ul>
                  </div>
                  <div class="tip-item">
                    <h5>Flood Safety</h5>
                    <ul>
                      <li>Avoid walking through floodwater</li>
                      <li>Stay on higher ground</li>
                      <li>Follow evacuation instructions</li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Emergency Supplies -->
              <div class="resource-section">
                <h4><i class="fas fa-box-open"></i> Emergency Supplies</h4>
                <div class="supplies-checklist">
                  <div class="checklist-item">
                    <input type="checkbox" id="supply1">
                    <label for="supply1">First Aid Kit</label>
                  </div>
                  <div class="checklist-item">
                    <input type="checkbox" id="supply2">
                    <label for="supply2">Flashlight & Batteries</label>
                  </div>
                  <div class="checklist-item">
                    <input type="checkbox" id="supply3">
                    <label for="supply3">Emergency Food & Water</label>
                  </div>
                  <div class="checklist-item">
                    <input type="checkbox" id="supply4">
                    <label for="supply4">Emergency Contact List</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Center Column -->
        <div class="emergency-column center-column">
          <!-- Evacuation System -->
          <div class="card evacuation-card">
            <h3><i class="fas fa-route"></i> Evacuation System</h3>
            <div class="campus-selector">
              <label for="evacuationCampusSelect">Select Campus:</label>
              <select id="evacuationCampusSelect" class="styled-select">
                <!-- Campus options will be populated here -->
              </select>
            </div>
            
            <!-- Status Dashboard -->
            <div class="evacuation-status">
              <div class="status-item">
                <i class="fas fa-users"></i>
                <span class="status-label">Current Occupancy</span>
                <span class="status-value" id="currentOccupancy">--</span>
              </div>
              <div class="status-item">
                <i class="fas fa-door-open"></i>
                <span class="status-label">Available Exits</span>
                <span class="status-value" id="availableExits">--</span>
              </div>
              <div class="status-item">
                <i class="fas fa-flag"></i>
                <span class="status-label">Assembly Points</span>
                <span class="status-value" id="assemblyPoints">--</span>
              </div>
            </div>

            <!-- Interactive Map -->
            <div class="map-container">
              <div id="evacuationMap"></div>
              <div class="map-controls">
                <button id="showAllRoutes"><i class="fas fa-map-marked-alt"></i> All Routes</button>
                <button id="showSafeRoutes"><i class="fas fa-shield-alt"></i> Safe Routes</button>
                <button id="showAssemblyPoints"><i class="fas fa-flag"></i> Assembly Points</button>
              </div>
            </div>

            <!-- Route Information -->
            <div id="routeList" class="route-information"></div>
          </div>
        </div>

        <!-- Right Column -->
        <div class="emergency-column right-column">
          <!-- Emergency Contacts -->
          <div class="card contacts-card">
            <h3><i class="fas fa-phone-alt"></i> Emergency Contacts</h3>
            <div id="contactsContent" class="contacts-container">
              <!-- Contacts will be populated here -->
            </div>
          </div>

          <!-- Emergency Procedures -->
          <div class="card procedures-card">
            <h3><i class="fas fa-clipboard-list"></i> Emergency Procedures</h3>
            <div class="procedures-tabs">
              <button class="procedure-tab active" data-tab="flood">Flood</button>
              <button class="procedure-tab" data-tab="fire">Fire</button>
              <button class="procedure-tab" data-tab="earthquake">Earthquake</button>
            </div>
            <div class="procedure-content active" id="floodProcedure">
              <ol class="procedure-steps">
                <li>Stay calm and assess the situation</li>
                <li>Monitor emergency alerts and announcements</li>
                <li>Follow evacuation routes to higher ground</li>
                <li>Avoid walking through floodwater</li>
                <li>Proceed to designated assembly points</li>
                <li>Wait for further instructions from authorities</li>
              </ol>
            </div>
            <div class="procedure-content" id="fireProcedure">
              <!-- Fire procedure content -->
            </div>
            <div class="procedure-content" id="earthquakeProcedure">
              <!-- Earthquake procedure content -->
            </div>
          </div>
        </div>
      </div>

      <!-- Emergency actions removed as they were overlapping with the map -->
    </div>
  </section>

  <section id="report-issues" class="page-section">
    <div class="report-container">
      <div class="report-header">
        <h1><i class="fas fa-exclamation-triangle"></i> Report Issues</h1>
        <p class="report-subtitle">Report flood-related issues, incidents, or provide feedback to help improve campus safety</p>
      </div>

      <div class="report-grid">
        <!-- Report Form -->
        <div class="report-card report-form-card">
          <h3><i class="fas fa-clipboard-list"></i> Submit Report</h3>
          <form id="reportForm" class="report-form">
            <div class="form-group">
              <label for="reportType"><i class="fas fa-tag"></i> Issue Type</label>
              <select id="reportType" required>
                <option value="">Select issue type...</option>
                <option value="flooding">Flooding</option>
                <option value="blocked-route">Blocked Route</option>
                <option value="infrastructure-damage">Infrastructure Damage</option>
                <option value="safety-concern">Safety Concern</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="reportLocation"><i class="fas fa-map-marker-alt"></i> Location</label>
              <input type="text" id="reportLocation" placeholder="Describe the location..." required>
            </div>

            <div class="form-group">
              <label for="reportDescription"><i class="fas fa-comment"></i> Description</label>
              <textarea id="reportDescription" rows="4" placeholder="Provide details about the issue..." required></textarea>
            </div>

            <div class="form-group">
              <label for="reportUrgency"><i class="fas fa-exclamation-circle"></i> Urgency Level</label>
              <select id="reportUrgency">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
                <option value="critical">Critical</option>
              </select>
            </div>

            <div class="form-group">
              <label for="reporterName"><i class="fas fa-user"></i> Your Name (Optional)</label>
              <input type="text" id="reporterName" placeholder="Anonymous">
            </div>

            <div class="form-group">
              <label for="reporterContact"><i class="fas fa-phone"></i> Contact Info (Optional)</label>
              <input type="text" id="reporterContact" placeholder="Email or phone number">
            </div>

            <button type="submit" class="run-btn primary"><i class="fas fa-paper-plane"></i> Submit Report</button>
          </form>
        </div>

        <!-- Photo Upload -->
        <div class="report-card photo-upload-card">
          <h3><i class="fas fa-camera"></i> Photo Evidence</h3>
          <div class="photo-upload-area">
            <div class="upload-placeholder">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Drag & drop photos here or click to browse</p>
              <input type="file" id="photoUpload" accept="image/*" multiple>
              <button class="run-btn secondary" onclick="document.getElementById('photoUpload').click()">
                <i class="fas fa-folder-open"></i> Choose Files
              </button>
            </div>
            <div id="photoPreview" class="photo-preview"></div>
          </div>
        </div>

        <!-- Incident Map -->
        <div class="report-card incident-map-card">
          <h3><i class="fas fa-map-marked-alt"></i> Incident Map</h3>
          <div id="incidentMap" class="incident-map"></div>
          <div class="map-controls">
            <button class="run-btn secondary" onclick="locateUser()">
              <i class="fas fa-crosshairs"></i> Use My Location
            </button>
            <button class="run-btn secondary" onclick="clearMarkers()">
              <i class="fas fa-trash"></i> Clear Markers
            </button>
          </div>
        </div>

        <!-- Status Tracking -->
        <div class="report-card status-tracking-card">
          <h3><i class="fas fa-tasks"></i> Report Status</h3>
          <div id="statusList" class="status-list">
            <div class="status-item">
              <div class="status-header">
                <span class="status-id">#REP-2024-001</span>
                <span class="status-badge pending">Pending</span>
              </div>
              <div class="status-details">
                <p><strong>Type:</strong> Flooding</p>
                <p><strong>Location:</strong> Taft Avenue near DLSU</p>
                <p><strong>Submitted:</strong> 2 hours ago</p>
              </div>
            </div>
            <div class="status-item">
              <div class="status-header">
                <span class="status-id">#REP-2024-002</span>
                <span class="status-badge in-progress">In Progress</span>
              </div>
              <div class="status-details">
                <p><strong>Type:</strong> Blocked Route</p>
                <p><strong>Location:</strong> España Boulevard</p>
                <p><strong>Submitted:</strong> 1 day ago</p>
              </div>
            </div>
            <div class="status-item">
              <div class="status-header">
                <span class="status-id">#REP-2024-003</span>
                <span class="status-badge resolved">Resolved</span>
              </div>
              <div class="status-details">
                <p><strong>Type:</strong> Safety Concern</p>
                <p><strong>Location:</strong> UP Diliman Quad</p>
                <p><strong>Submitted:</strong> 3 days ago</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Community Alerts -->
        <div class="report-card community-alerts-card">
          <h3><i class="fas fa-bullhorn"></i> Community Alerts</h3>
          <div id="communityAlerts" class="community-alerts">
            <div class="alert-item warning">
              <i class="fas fa-exclamation-triangle"></i>
              <div class="alert-content">
                <strong>Flash Flood Warning</strong>
                <p>Heavy rainfall expected in Manila area. Residents advised to stay indoors.</p>
                <small>Posted 30 minutes ago</small>
              </div>
            </div>
            <div class="alert-item info">
              <i class="fas fa-info-circle"></i>
              <div class="alert-content">
                <strong>Road Closure</strong>
                <p>Taft Avenue partially closed due to flooding. Use alternative routes.</p>
                <small>Posted 2 hours ago</small>
              </div>
            </div>
            <div class="alert-item success">
              <i class="fas fa-check-circle"></i>
              <div class="alert-content">
                <strong>Issue Resolved</strong>
                <p>Power restored to Mapúa Makati campus after brief outage.</p>
                <small>Posted 4 hours ago</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Emergency Hotlines Modal -->
  <div id="hotlinesModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Emergency Hotlines</h2>
      <div id="hotlinesContent"></div>
    </div>
  </div>

  <!-- Tutorial Modal -->
  <div id="tutorialModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>How to Use the Campus Flood Simulator</h2>
      <div id="tutorialContent">
        <div class="tutorial-step" id="step1">
          <h3>Step 1: Select your campus</h3>
          <p>Choose the campus you want to simulate from the dropdown menu. This will load the map and historical data for that location.</p>
          <button class="tutorial-next">Next</button>
        </div>
        <div class="tutorial-step" id="step2" style="display:none;">
          <h3>Step 2: Enter rainfall intensity or choose a scenario</h3>
          <p>Input the rainfall intensity in mm/hr, or use the preset buttons for Light, Moderate, or Heavy scenarios. You can also click the "?" icon for rainfall guidelines.</p>
          <button class="tutorial-prev">Previous</button>
          <button class="tutorial-next">Next</button>
        </div>
        <div class="tutorial-step" id="step3" style="display:none;">
          <h3>Step 3: Click 'Run Simulation' to see the results</h3>
          <p>Adjust duration and pattern if needed, then click "Run Simulation". The map will show flood risks, and the results panel will display detailed information.</p>
          <button class="tutorial-prev">Previous</button>
          <button class="tutorial-done">Got it!</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Rainfall Guidelines Modal -->
  <div id="guidelinesModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Rainfall Intensity Guidelines</h2>
      <div id="guidelinesContent">
        <ul>
          <li><strong>Light Rain:</strong> 5-10 mm/hr</li>
          <li><strong>Moderate Rain:</strong> 15-30 mm/hr</li>
          <li><strong>Heavy Thunderstorm:</strong> 40-60+ mm/hr</li>
        </ul>
        <p>These are general guidelines. Actual intensities can vary by location and weather conditions.</p>
      </div>
    </div>
  </div>

  <!-- Duration Guidelines Modal -->
  <div id="durationModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Duration Guidelines</h2>
      <div id="durationContent">
        <ul>
          <li><strong>Short Event:</strong> 30-60 minutes (typical shower)</li>
          <li><strong>Moderate Event:</strong> 60-120 minutes (typical storm)</li>
          <li><strong>Extended Event:</strong> 120-240 minutes (prolonged rainfall)</li>
          <li><strong>Extreme Event:</strong> 240+ minutes (monsoon conditions)</li>
        </ul>
        <p>Duration affects flood accumulation. Longer durations allow more water to build up even with lower intensity.</p>
      </div>
    </div>
  </div>

  <!-- Weather Mode Guidelines Modal -->
  <div id="weatherModeModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Weather Mode Guidelines</h2>
      <div id="weatherModeContent">
        <div class="mode-explanation">
          <h3>Manual Input</h3>
          <p>Use this mode when you have specific rainfall data from weather reports or sensors. Enter exact values for precise simulation.</p>
        </div>
        <div class="mode-explanation">
          <h3>Mock Data</h3>
          <p>Generates realistic rainfall patterns based on current time of day. Useful for testing and demonstration purposes.</p>
        </div>
        <div class="mode-explanation">
          <h3>Real-Time</h3>
          <p>Fetches live weather data from OpenWeatherMap API. Requires internet connection and may have API rate limits.</p>
        </div>
        <p><strong>Note:</strong> Real-time mode falls back to mock data if API is unavailable.</p>
      </div>
    </div>
  </div>

  <!-- Rainfall Pattern Guidelines Modal -->
  <div id="rainfallPatternModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Rainfall Pattern Guidelines</h2>
      <div id="rainfallPatternContent">
        <div class="pattern-explanation">
          <h3>Bell Curve (Most Common)</h3>
          <p>Rainfall starts slow, peaks in the middle, then tapers off. Represents typical storm patterns.</p>
        </div>
        <div class="pattern-explanation">
          <h3>Uniform</h3>
          <p>Constant rainfall intensity throughout the duration. Rare in nature but useful for testing.</p>
        </div>
        <div class="pattern-explanation">
          <h3>Increasing</h3>
          <p>Rainfall gradually builds up over time. Common in developing storm systems.</p>
        </div>
        <div class="pattern-explanation">
          <h3>Decreasing</h3>
          <p>Rainfall starts heavy and gradually reduces. Common as storms move away.</p>
        </div>
        <p><strong>Impact:</strong> Pattern affects flood timing and peak water levels.</p>
      </div>
    </div>
  </div>

  <!-- Street Details Modal -->
  <div id="streetDetailsModal" class="modal">
    <div class="modal-content large-modal">
      <span class="close">&times;</span>
      <h2>Street Flood Risk Factors</h2>
      <div id="streetDetailsContent">
        <p>Select a campus to view detailed flood risk factors for each street.</p>
      </div>
    </div>
  </div>

  <!-- Coordinate Validation Modal -->
  <div id="validationModal" class="modal">
    <div class="modal-content large-modal">
      <span class="close">&times;</span>
      <div class="validation-container">
        <div class="validation-header">
          <h2><i class="fas fa-map-marker-alt"></i> Coordinate Validation</h2>
          <p>Validating coordinates for selected campus</p>
        </div>

        <div class="validation-progress">
          <div id="modalValidationProgress" class="progress-bar"></div>
        </div>

        <div id="modalValidationResults" class="validation-results">
          <!-- Results will be populated here -->
        </div>

        <div class="validation-actions" style="margin-top: 20px; text-align: right;">
          <button onclick="validationController.exportValidationReport()" class="run-btn secondary">
            <i class="fas fa-download"></i> Export Report
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase and auth functionality removed -->
  
  <script src="data.js"></script>
  <script src="services/geocodingService.js"></script>
  <script src="scripts/weatherBulletin.js"></script>
  <script src="scripts/weatherInit.js"></script>
  <script src="scripts/emergencyContacts.js"></script>
  <script src="scripts/evacuationMap.js"></script>
  <script src="scripts/emergencyProcedures.js"></script>
  <!-- Help & Units Panel Modal -->
  <div id="helpUnitsModal" class="help-units-modal">
    <div class="help-units-content">
      <div class="help-units-header">
        <h3><i class="fas fa-info-circle"></i> Help & Settings</h3>
      </div>
      <div class="help-units-body">
        <div class="unit-toggle">
          <button id="unitToggle" class="run-btn secondary">Units: cm</button>
          <button id="howToUseBtn" class="run-btn secondary">How to Use</button>
        </div>
        <div class="notes small">
          <p><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Sensitivities are based on historical data. Use real sensor data for accurate results.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts/helpUnits.js"></script>
  <script src="script.js"></script>
  <script src="validation.js"></script>
  <script src="controllers/authController.js"></script>
</body>
</html>
